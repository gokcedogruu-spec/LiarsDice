:root {
  --bg-color: #5D4037;
  --surface: #3d405b; 
  --primary: #ef233c; --secondary: #8d99ae; --accent: #ffb703; 
  --success: #06d6a0; --blue: #118ab2; --text: #edf2f4;
  
  --font: 'Shantell Sans', sans-serif;
  --radius: 20px;
  --shadow-card: 0px 8px 20px rgba(0,0,0,0.5);
}

* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; user-select: none; }

body {
  font-family: var(--font); height: 100vh; overflow: hidden; color: var(--text);
  background-color: #5D4037;
  background-image: 
    repeating-linear-gradient(90deg, transparent 0, transparent 80px, rgba(0,0,0,0.3) 80px, rgba(0,0,0,0.3) 82px),
    repeating-radial-gradient(circle at 50% 50%, rgba(255,255,255,0.03) 0, transparent 10px);
  box-shadow: inset 0 0 50px rgba(0,0,0,0.5);
}

#app { width: 100%; height: 100%; position: relative; }

.screen {
  width: 100%; height: 100%; position: absolute; top: 0; left: 0;
  display: flex; flex-direction: column; opacity: 0; visibility: hidden;
  transition: opacity 0.3s, visibility 0s 0.3s;
  padding: 20px;
}
.screen.active {
  opacity: 1; visibility: visible; transition: opacity 0.3s, visibility 0s;
}
.center-content { justify-content: center; align-items: center; }

/* --- WAVY TEXT (МУЛЬТЯШНАЯ АНИМАЦИЯ) --- */
.wavy-text { 
    display: block; 
    font-size: 2.5rem; 
    font-weight: 800; 
    text-align: center;
    line-height: 1.1;
    color: var(--accent);
    text-shadow: 2px 2px 0 var(--primary), 4px 4px 0 rgba(0,0,0,0.3);
}
.wavy-text span {
    display: inline-block;
    animation: wave 1.5s infinite ease-in-out;
    animation-delay: calc(0.1s * var(--i));
}
.wavy-text span:nth-child(1) { --i: 1; }
.wavy-text span:nth-child(2) { --i: 2; }
.wavy-text span:nth-child(3) { --i: 3; }
.wavy-text span:nth-child(4) { --i: 4; }
.wavy-text span:nth-child(5) { --i: 5; }
.wavy-text span:nth-child(6) { --i: 6; }
.wavy-text span:nth-child(7) { --i: 7; }
.wavy-text span:nth-child(8) { --i: 8; }
.wavy-text span:nth-child(9) { --i: 9; }

@keyframes wave {
    0%, 100% { transform: translateY(0) rotate(0); }
    50% { transform: translateY(-5px) rotate(2deg); }
}

/* --- LOGO --- */
.logo-container { text-align: center; margin-bottom: 20px; }
.logo-icon { font-size: 3rem; margin-bottom: 10px; }

/* --- CARD & BUTTONS --- */
.card {
    background: var(--surface); 
    padding: 20px; 
    border-radius: var(--radius); 
    width: 100%; 
    max-width: 400px; 
    box-shadow: var(--shadow-card);
    margin-bottom: 20px;
}

.btn {
    display: block; width: 100%; padding: 15px; margin-top: 15px;
    border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700;
    cursor: pointer; transition: transform 0.1s, box-shadow 0.1s;
    box-shadow: 0 4px 0 rgba(0,0,0,0.3);
}
.btn:active { transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.3); }
.btn:disabled { opacity: 0.5; cursor: default; transform: none; box-shadow: none; }

.btn-green { background-color: var(--success); color: black; }
.btn-orange { background-color: var(--accent); color: black; }
.btn-blue { background-color: var(--blue); color: var(--text); }
.btn-red { background-color: var(--primary); color: var(--text); }

input[type="text"], select {
    width: 100%; padding: 12px; margin: 10px 0 20px;
    border: none; border-radius: 8px; font-size: 1rem;
    background: rgba(255,255,255,0.1); color: var(--text);
}

/* --- PLAYER STATUS HOME --- */
.player-status { display: flex; align-items: center; gap: 15px; }
.player-text-info { flex-grow: 1; }
.player-name-home { font-size: 1.2rem; margin: 0; }
.player-rank-home { font-size: 0.9rem; color: var(--secondary); }
.coins-display { display: flex; align-items: center; font-size: 1.2rem; font-weight: 700; }
.coin-icon { margin-left: 5px; font-size: 1.5rem; }
.equipped-icon { font-size: 2rem; background: var(--accent); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; color: black; }

/* --- SETTINGS --- */
.settings-card { padding: 30px 20px; }
.setting-group { margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
.setting-group label { display: block; margin-bottom: 8px; font-weight: 700; font-size: 1rem; }
input[type="range"] { width: 100%; -webkit-appearance: none; height: 8px; background: rgba(255,255,255,0.3); border-radius: 5px; }
input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%; background: var(--accent); cursor: pointer; box-shadow: 0 0 5px rgba(0,0,0,0.5); }

.rules-group { margin-top: 20px; }
.rule-toggle { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }

.toggle-switch {
  position: relative; width: 40px; height: 20px; -webkit-appearance: none; 
  background: var(--secondary); border-radius: 10px; transition: background-color .3s;
}
.toggle-switch:checked { background: var(--success); }
.toggle-switch:before {
  content: ""; position: absolute; width: 16px; height: 16px; top: 2px; left: 2px;
  background: white; border-radius: 50%; transition: transform .3s;
}
.toggle-switch:checked:before { transform: translateX(20px); }

/* --- LOBBY --- */
.lobby-players-list { display: flex; flex-direction: column; gap: 10px; max-height: 300px; overflow-y: auto; }
.lobby-player-card { display: flex; align-items: center; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 10px; }
.lobby-player-name { flex-grow: 1; margin-left: 10px; }
.lobby-player-rank { font-size: 0.8rem; color: var(--accent); }

/* --- GAME SCREEN --- */
#screen-game { padding: 10px; justify-content: space-between; }
.game-header { width: 100%; }

/* Timer */
.timer-bar { height: 5px; width: 100%; background: rgba(255,255,255,0.2); border-radius: 2.5px; margin-bottom: 10px; }
.timer-progress { height: 100%; width: 100%; background: var(--accent); border-radius: 2.5px; transition: width 0.1s linear; }

/* Player List */
.player-list { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 10px; }
.player-card { 
    background: var(--surface); padding: 8px; border-radius: 12px; 
    min-width: 100px; flex-shrink: 0; box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    border: 2px solid transparent;
}
.player-card.is-turn { border-color: var(--accent); animation: pulse 1s infinite alternate; }
.player-card.eliminated { opacity: 0.5; }
.player-info { display: flex; align-items: center; font-size: 0.8rem; }
.player-name { flex-grow: 1; margin-left: 5px; font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.player-rank { font-size: 0.7rem; color: var(--secondary); margin-left: auto; }
.player-dice { font-size: 0.9rem; margin-top: 5px; }

/* Current Bid */
.current-bid-box { text-align: center; margin: 20px auto; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 10px; }
.current-bid { font-size: 1.8rem; font-weight: 800; color: var(--secondary); transition: color 0.3s; }
.current-bid.active { color: var(--accent); animation: popIn 0.3s; }

/* Dice Display (для отображения всех кубиков после блефа/спота) */
#all-dice-display { 
    text-align: center; margin: 10px 0; 
    font-size: 2rem; 
    opacity: 0; transition: opacity 0.3s; 
    background: rgba(0,0,0,0.5); padding: 5px; border-radius: 10px;
}
#all-dice-display.active { opacity: 1; }

/* Game Log */
.game-event-log { flex-grow: 1; overflow-y: auto; max-height: 150px; margin-top: 10px; font-size: 0.9rem; }
.log-item { padding: 4px 0; border-bottom: 1px dashed rgba(255,255,255,0.1); }
.log-alert { color: var(--accent); }
.log-error { color: var(--primary); font-weight: 700; }
.log-info { color: var(--text); }

/* Game Controls */
.game-controls { width: 100%; background: var(--surface); padding: 15px; border-radius: var(--radius) var(--radius) 0 0; box-shadow: 0 -4px 10px rgba(0,0,0,0.5); }
.game-controls.hidden { display: none; }

.your-dice-container { text-align: center; margin-bottom: 10px; }
.your-dice-container label { font-size: 0.8rem; color: var(--secondary); }
.your-dice-list { display: flex; justify-content: center; gap: 8px; margin-top: 5px; }
.your-dice-list .dice-face { font-size: 2.5rem; background: none; color: white; padding: 0; }

.bid-section { display: flex; gap: 10px; align-items: flex-end; }
.bid-stepper { flex-grow: 1; text-align: center; }
.stepper-controls { display: flex; align-items: center; justify-content: space-around; background: rgba(0,0,0,0.2); padding: 8px; border-radius: 16px; text-align: center; }
.bid-stepper label { font-size: 0.65rem; color: var(--secondary); font-weight: 700; display: block; margin-bottom: 4px; }
.bid-val { font-size: 1.5rem; font-weight: 800; color: white; min-width: 30px; }
.dice-face { font-size: 1.5rem; background: white; color: black; border-radius: 6px; padding: 0 6px; font-weight: 800; }
.main-actions { display: flex; gap: 10px; }
.main-actions button { margin: 0; padding: 14px; font-size: 1rem; }
#btn-call-spot.hidden-rule { display: none !important; }

/* --- RESULT SCREEN --- */
.winner-box { text-align: center; margin-top: 30px; padding: 30px; animation: popIn 0.5s 0.2s backwards; }
.trophy-icon { font-size: 3rem; color: var(--accent); }
.winner-name { font-size: 2rem; color: var(--success); margin: 10px 0; }
.winner-sub { color: var(--secondary); }

/* --- ANIMATION CLASSES --- */
.slide-up { animation: slideUp 0.3s forwards; }
.slide-down { animation: slideDown 0.3s forwards; }
.slide-up-delay { animation: slideUp 0.3s 0.2s backwards; }
.pop-in { animation: popIn 0.3s forwards; }
.pop-in-delay { animation: popIn 0.3s 0.1s backwards; }

@keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes slideDown { from { transform: translateY(-30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
